<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>LR Loop Player</title>
  <link rel="stylesheet" href="./style.css">
  <script defer src="./app.js"></script>
</head>
<body>
  <main class="container">
    <h1 class="title">LR Loop Player</h1>

    <div id="hint" class="hint" hidden>
      <p>使い方：</p>
      <ul>
        <li>URL直指定：<code>?v=VIDEO_ID&s=開始秒&e=終了秒&t=字幕</code></li>
        <li>JSON参照：<code>?v=VIDEO_ID&id=セグメントID</code>（<code>data/segments.json</code>から読み込み）</li>
      </ul>
    </div>

    <!-- URLジェネレータ -->
    <form id="urlForm" class="url-form" autocomplete="off">
      <div class="grid">
        <label>Video ID <input name="v" placeholder="例: dQw4w9WgXcQ" required></label>
        <label>Start (s) <input name="s" type="number" step="0.1" placeholder="例: 18.0"></label>
        <label>End (e)   <input name="e" type="number" step="0.1" placeholder="例: 25.7"></label>
        <label>Text (t)  <input name="t" placeholder="字幕テキスト（直指定時のみ）"></label>
        <label>Seg ID    <input name="id" placeholder="例: seg001（JSON参照時）」></label>
      </div>
      <button type="submit">この条件で開く</button>
    </form>

    <!-- プレイヤー -->
    <section class="player-wrapper">
      <div id="player"></div>
    </section>

    <!-- 字幕 -->
    <div id="subs" class="subtitles" aria-live="polite"></div>

    <!-- コントロール -->
    <div class="bar">
      <div class="cluster">
        <button class="pill pill--dark" data-role="start-dec-05">−0.5</button>
        <button class="pill pill--dark" data-role="start-dec-01">−0.1</button>
        <div class="pill readout">
          <div class="label">Start</div>
          <div id="startVal" class="value">0:00.0</div>
        </div>
        <button class="pill pill--dark" data-role="start-inc-01">＋0.1</button>
        <button class="pill pill--dark" data-role="start-inc-05">＋0.5</button>
      </div>

      <div class="cluster">
        <button class="pill pill--dark" data-role="end-dec-05">−0.5</button>
        <button class="pill pill--dark" data-role="end-dec-01">−0.1</button>
        <div class="pill readout">
          <div class="label">End</div>
          <div id="endVal" class="value">0:03.0</div>
        </div>
        <button class="pill pill--dark" data-role="end-inc-01">＋0.1</button>
        <button class="pill pill--dark" data-role="end-inc-05">＋0.5</button>
      </div>
    </div>

    <div class="bar">
      <button id="speedBtn" class="bigpill">0.5x</button>
      <button id="playBtn" class="bigpill" disabled>▶︎</button>
    </div>

    <div class="time-info" id="timeInfo"></div>
  </main>
</body>
</html>
